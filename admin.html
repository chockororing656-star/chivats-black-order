<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>CHIVATS BLACK ORDER</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  background:#111;
  color:#fff;
  font-family:sans-serif;
}
.container{max-width:420px;margin:auto}
.item{display:flex;justify-content:space-between;margin:8px 0}
.qty button{width:30px}
input,button{width:100%;padding:10px;margin:6px 0}
button{background:#f5c16c;border:none;font-size:16px}
</style>
</head>

<body>
<div class="container">

<h2>ü•ô CHIVATS BLACK</h2>
<p>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</p>

<div id="menu"></div>

<h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
<input id="customerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á">
<input id="customerPhone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">

<h3>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
<label><input type="radio" name="pay" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" checked> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</label>
<label><input type="radio" name="pay" value="PromptPay"> PromptPay</label>

<button onclick="submitOrder()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>

</div>

<script>
// üî• Firebase config (‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
firebase.initializeApp({
  apiKey: "AIzaSyC03JcyEyEg4iWVKMfgcpDR82EUiFOXMd4",
  authDomain: "chivats-black-order.firebaseapp.com",
  projectId: "chivats-black-order"
});
const db = firebase.firestore();

// üîî Telegram
const TELEGRAM_TOKEN = "8529xxxxxxxx:AAHxxxxxxxxxxxx";
const TELEGRAM_CHAT_ID = "5665607150";

// üçî ‡πÄ‡∏°‡∏ô‡∏π
const menuData = [
 {name:"‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L", price:69},
 {name:"‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M", price:60},
 {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L", price:45},
 {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M", price:40},
 {name:"‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏ö‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L", price:45},
 {name:"‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏ö‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M", price:40},
 {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏ö", price:45}
];

const cart = new Array(menuData.length).fill(0);

function renderMenu(){
  const m = document.getElementById("menu");
  m.innerHTML="";
  menuData.forEach((i,idx)=>{
    m.innerHTML += `
    <div class="item">
      ${i.name} (${i.price}‡∏ø)
      <div class="qty">
        <button onclick="chg(${idx},-1)">-</button>
        <span id="q${idx}">0</span>
        <button onclick="chg(${idx},1)">+</button>
      </div>
    </div>`;
  });
}
renderMenu();

function chg(i,d){
  cart[i]=Math.max(0,cart[i]+d);
  document.getElementById("q"+i).innerText=cart[i];
  calc();
}
function calc(){
  let t=0;
  menuData.forEach((i,idx)=>t+=i.price*cart[idx]);
  document.getElementById("total").innerText=t;
}

// üöÄ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
async function submitOrder(){
  const name = customerName.value.trim();
  const phone = customerPhone.value.trim();
  if(!name||!phone){alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡πÄ‡∏ö‡∏≠‡∏£‡πå");return;}

  const items=[];
  let text="üõéÔ∏è ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà CHIVATS BLACK\n";
  menuData.forEach((i,idx)=>{
    if(cart[idx]>0){
      items.push({...i,qty:cart[idx]});
      text+=`‚Ä¢ ${i.name} x${cart[idx]}\n`;
    }
  });
  if(items.length===0){alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π");return;}

  const total=Number(document.getElementById("total").innerText);
  const pay=document.querySelector('input[name="pay"]:checked').value;

  text+=`\nüí∞ ${total} ‡∏ö‡∏≤‡∏ó\nüë§ ${name}\nüìû ${phone}\nüí≥ ${pay}`;

  await db.collection("orders").add({
    name,phone,payment:pay,
    items,total,
    status:"new",
    time:new Date()
  });

  fetch(`https://api.telegram.org/bot${TELEGRAM_TOKEN}/sendMessage`,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id:TELEGRAM_CHAT_ID,text})
  });

  alert("‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡πâ‡∏ß");
  location.reload();
}
</script>
</body>
</title
