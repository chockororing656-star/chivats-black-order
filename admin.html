<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>ADMIN - CHIVATS BLACK</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#111;
  color:#fff;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
h1{
  color:#f5c16c;
}
.order{
  border:1px solid #333;
  padding:15px;
  margin:15px 0;
  border-radius:8px;
}
.order h3{
  margin:0 0 10px 0;
  color:#3cff8f;
}
.item{
  margin-left:15px;
}
.loading{
  opacity:0.6;
}
</style>
</head>

<body>
<div class="container">
  <h1>üì¶ ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h1>
  <div id="orders" class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
</div>

<script>
/* ===== Firebase Config (‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ index.html) ===== */
const firebaseConfig = {
  apiKey: "AIzaSyC03JcyEyEg4iWVKMfgcpDR82EUiFOXMd4",
  authDomain: "chivats-black-order.firebaseapp.com",
  projectId: "chivats-black-order",
  storageBucket: "chivats-black-order.appspot.com",
  messagingSenderId: "1012545451252",
  appId: "1:1012545451252:web:0df1a74dc553f201bddaa1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* ===== ‡∏î‡∏∂‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå ===== */
const ordersDiv = document.getElementById("orders");

db.collection("orders")
  .orderBy("createdAt", "desc")
  .onSnapshot(snapshot => {

    ordersDiv.classList.remove("loading");
    ordersDiv.innerHTML = "";

    if(snapshot.empty){
      ordersDiv.innerHTML = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå";
      return;
    }

    snapshot.forEach(doc => {
      const o = doc.data();

      let html = `
        <div class="order">
          <h3>üßæ ${o.name} (${o.phone})</h3>
          <div>üí≥ ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô: ${o.payment}</div>
          <div>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</div>
      `;

      o.items.forEach(i=>{
        html += `<div class="item">- ${i.name} x ${i.qty} = ${i.price * i.qty}‡∏ø</div>`;
      });

      html += `<strong>üí∞ ‡∏£‡∏ß‡∏°: ${o.total} ‡∏ö‡∏≤‡∏ó</strong></div>`;
      ordersDiv.innerHTML += html;
    });
  });
</script>

</body>
</html>
