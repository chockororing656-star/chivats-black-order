<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN - CHIVATS BLACK</title>

<style>
body {
  background:#111;
  color:#fff;
  font-family:sans-serif;
  padding:16px;
}
.order {
  background:#1e1e1e;
  padding:14px;
  border-radius:12px;
  margin-bottom:12px;
}
button {
  padding:10px;
  margin-top:8px;
  width:100%;
  background:#f1c24a;
  border:none;
  border-radius:10px;
  font-weight:bold;
}
</style>
</head>

<body>

<h1>ğŸ“¦ à¸­à¸­à¹€à¸”à¸­à¸£à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</h1>
<div id="orders">à¸à¸³à¸¥à¸±à¸‡à¹‚à¸«à¸¥à¸”...</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyXXXX",
  authDomain: "chivats-black-order.firebaseapp.com",
  projectId: "chivats-black-order",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const ordersDiv = document.getElementById("orders");

const q = query(collection(db,"orders"), orderBy("createdAt","desc"));

onSnapshot(q, snap => {
  ordersDiv.innerHTML = "";
  snap.forEach(doc => {
    const o = doc.data();
    const div = document.createElement("div");
    div.className = "order";
    div.innerHTML = `
      <b>ğŸ‘¤ ${o.name}</b><br>
      ğŸ“ ${o.phone}<br>
      ğŸ’³ ${o.payment}<br>
      ğŸ’° ${o.total} à¸šà¸²à¸—<br>
      ğŸ•’ ${o.createdAt?.toDate().toLocaleString("th-TH") || ""}<br><br>
      ${o.items.map(i => `â€¢ ${i.name} ${i.price}à¸¿`).join("<br>")}
    `;
    ordersDiv.appendChild(div);
  });
});
</script>

</body>
</html>
