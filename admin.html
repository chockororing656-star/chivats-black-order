<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ADMIN ‚Äì CHIVATS BLACK</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#111;
  color:#fff;
}
.container{
  max-width:600px;
  margin:auto;
  padding:20px;
}
h1{
  color:#f5c16c;
  text-align:center;
}
input,button{
  width:100%;
  padding:12px;
  font-size:16px;
  margin-top:10px;
}
button{
  background:#f5c16c;
  border:none;
  cursor:pointer;
}
.order{
  background:#1e1e1e;
  padding:15px;
  margin:15px 0;
  border-radius:8px;
}
.received{
  opacity:0.6;
  border-left:5px solid #3cff8f;
}
.hidden{display:none;}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="container" id="loginBox">
  <h1>üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h1>
  <input id="password" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
  <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</button>
</div>

<!-- ADMIN -->
<div class="container hidden" id="adminBox">
  <h1>üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h1>
  <div id="orders">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
</div>

<script>
const ADMIN_PASSWORD = "1234";

function login(){
  const pass = document.getElementById("password").value;
  if(pass !== ADMIN_PASSWORD){
    alert("‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
    return;
  }

  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("adminBox").classList.remove("hidden");

  loadFirebase(); // üî• ‡πÇ‡∏´‡∏•‡∏î Firebase ‡∏´‡∏•‡∏±‡∏á login
}

/* ===== Firebase ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏±‡∏á login ===== */
function loadFirebase(){
  const s1 = document.createElement("script");
  s1.src = "https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js";
  s1.onload = ()=>{
    const s2 = document.createElement("script");
    s2.src = "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js";
    s2.onload = initFirebase;
    document.body.appendChild(s2);
  };
  document.body.appendChild(s1);
}

function initFirebase(){
  const firebaseConfig = {
    apiKey: "AIzaSyC03JcyEyEg4iWVKMfgcpDR82EUiFOXMd4",
    authDomain: "chivats-black-order.firebaseapp.com",
    projectId: "chivats-black-order"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  db.collection("orders").orderBy("time","desc")
    .onSnapshot(snap=>{
      const box = document.getElementById("orders");
      box.innerHTML = "";
      snap.forEach(doc=>{
        const o = doc.data();
        box.innerHTML += `
          <div class="order ${o.status==="received"?"received":""}">
            <b>${o.name}</b> (${o.phone})<br>
            üí∞ ${o.total} ‡∏ö‡∏≤‡∏ó<br>
            <small>${o.payment}</small>
          </div>
        `;
      });
    });
}
</script>

</body>
</html>
