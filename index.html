<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHIVATS BLACK</title>

<style>
body{
  margin:0;
  background:#0f0f0f;
  font-family:sans-serif;
  color:#fff;
}
.container{
  max-width:480px;
  margin:auto;
  padding:16px;
}
h1{color:#f5b942;text-align:center}
.menu button{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border:none;
  border-radius:12px;
  background:#f5b942;
  font-size:16px;
  font-weight:bold;
}
.card{
  background:#1c1c1c;
  padding:12px;
  border-radius:12px;
  margin-top:16px;
}
input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  margin-bottom:10px;
  font-size:16px;
}
.submit{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#f5b942;
  font-size:18px;
  font-weight:bold;
}
.submit:disabled{
  opacity:.4;
}
.remove{
  float:right;
  background:red;
  border:none;
  border-radius:6px;
  color:#fff;
}
</style>
</head>

<body>
<div class="container">
<h1>üç¢ CHIVATS BLACK</h1>

<div class="menu">
<button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L',69)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L +69</button>
<button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M',60)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M +60</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
<button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
<button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ +45</button>
</div>

<div class="card">
<h3>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h3>
<div id="list"></div>
<p>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <b id="total">0</b> ‡∏ö‡∏≤‡∏ó</p>
</div>

<div class="card">
<h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
<input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á">
<input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">
<button class="submit" id="submit" onclick="sendOrder()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
  authDomain: "‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
  projectId: "‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let cart=[];

window.addItem=(name,price)=>{
  const f = cart.find(i=>i.name===name);
  if(f) f.qty++;
  else cart.push({name,price,qty:1});
  render();
}

window.removeItem=(i)=>{
  cart.splice(i,1);
  render();
}

function render(){
  const list=document.getElementById("list");
  let total=0;
  list.innerHTML="";
  cart.forEach((i,idx)=>{
    total+=i.price*i.qty;
    list.innerHTML+=`
      <div>
        ${i.name} x${i.qty}
        <button class="remove" onclick="removeItem(${idx})">X</button>
      </div>`;
  });
  document.getElementById("total").innerText=total;
}

window.sendOrder=async()=>{
  const name=document.getElementById("name").value.trim();
  const phone=document.getElementById("phone").value.trim();
  if(!name||!phone||cart.length===0){
    alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π");
    return;
  }

  document.getElementById("submit").disabled=true;

  await addDoc(collection(db,"orders"),{
    name,phone,
    items:cart,
    total:cart.reduce((s,i)=>s+i.price*i.qty,0),
    status:"new",
    time:serverTimestamp()
  });

  alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
  location.reload();
}
</script>
</body>
</html>
