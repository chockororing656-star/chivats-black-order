<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CHIVATS BLACK ORDER</title>

<style>
body{
  margin:0;
  font-family:sans-serif;
  background:#0f0f0f;
  color:#fff;
}
.container{
  max-width:420px;
  margin:auto;
  padding:16px;
}
h1{color:#f5b942}
.menu button{
  width:100%;
  margin:6px 0;
  padding:14px;
  background:#f5b942;
  border:none;
  border-radius:10px;
  font-size:16px;
  font-weight:bold;
}
.cart{
  background:#1c1c1c;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
}
.cart-item{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
}
input{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  margin:6px 0;
}
.submit{
  background:#f5b942;
  color:#000;
  font-weight:bold;
  border:none;
  padding:14px;
  width:100%;
  border-radius:10px;
  font-size:18px;
}
</style>
</head>

<body>
<div class="container">

<h1>üç¢ CHIVATS BLACK</h1>

<div class="menu" id="menu"></div>

<div class="cart">
  <h3>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h3>
  <div id="cart"></div>
  <h3>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</h3>
</div>

<h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
<input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á">
<input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">

<button class="submit" onclick="submitOrder()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
  authDomain: "‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì",
  projectId: "‡πÉ‡∏™‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const menuData = [
  {name:"‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L", price:69},
  {name:"‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M", price:60},
  {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L", price:45},
  {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M", price:40},
  {name:"‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L", price:45},
  {name:"‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M", price:40},
  {name:"‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ", price:45},
];

let cart = [];

const menuDiv = document.getElementById("menu");
const cartDiv = document.getElementById("cart");
const totalSpan = document.getElementById("total");

menuData.forEach(item=>{
  const btn = document.createElement("button");
  btn.textContent = `${item.name} +${item.price}`;
  btn.onclick = ()=>addItem(item);
  menuDiv.appendChild(btn);
});

function addItem(item){
  const found = cart.find(i=>i.name===item.name);
  if(found){
    found.qty++;
  }else{
    cart.push({...item, qty:1});
  }
  renderCart();
}

function renderCart(){
  cartDiv.innerHTML="";
  let total=0;
  cart.forEach((item,index)=>{
    total += item.price*item.qty;
    const div = document.createElement("div");
    div.className="cart-item";
    div.innerHTML = `
      ${item.name} x${item.qty}
      <button onclick="removeItem(${index})">‚ùå</button>
    `;
    cartDiv.appendChild(div);
  });
  totalSpan.textContent = total;
}

window.removeItem = (i)=>{
  cart.splice(i,1);
  renderCart();
}

window.submitOrder = async ()=>{
  if(cart.length===0) return alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π");
  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;

  await addDoc(collection(db,"orders"),{
    name,
    phone,
    items:cart,
    total:Number(totalSpan.textContent),
    time:serverTimestamp(),
    status:"new"
  });

  fetch(`https://api.callmebot.com/text.php?user=YOUR_CHAT_ID&text=üõéÔ∏è ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà ${name} ${phone} ‡∏¢‡∏≠‡∏î ${totalSpan.textContent} ‡∏ö‡∏≤‡∏ó`);

  alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
  cart=[];
  renderCart();
};
</script>

</body>
</html>
