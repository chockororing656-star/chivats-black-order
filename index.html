<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHIVATS BLACK</title>

<style>
body{
  margin:0;
  background:#0f0f0f;
  font-family:sans-serif;
  color:#fff;
}
.container{
  max-width:480px;
  margin:auto;
  padding:16px;
}
h1{color:#f5b942;text-align:center}
.menu button{
  width:100%;
  padding:14px;
  margin-bottom:10px;
  border:none;
  border-radius:12px;
  background:#f5b942;
  font-size:16px;
  font-weight:bold;
}
.card{
  background:#1c1c1c;
  padding:12px;
  border-radius:12px;
  margin-top:16px;
}
input,textarea{
  width:100%;
  padding:12px;
  border-radius:8px;
  border:none;
  margin-bottom:10px;
  font-size:16px;
}
.submit{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#f5b942;
  font-size:18px;
  font-weight:bold;
}
.remove{
  float:right;
  background:red;
  border:none;
  border-radius:6px;
  color:#fff;
}
.radio{
  margin-bottom:8px;
}
.qr{
  text-align:center;
  margin-top:10px;
}
</style>
</head>

<body>
<div class="container">
<h1>üç¢ CHIVATS BLACK</h1>

<div class="menu">
<button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L',69)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L +69</button>
<button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M',60)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M +60</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
<button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
<button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
<button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ +45</button>
</div>

<div class="card">
<h3>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h3>
<div id="list"></div>
<p>üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <b id="total">0</b> ‡∏ö‡∏≤‡∏ó</p>
</div>

<div class="card">
<h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
<input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á">
<input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£">

<h3>‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
<div class="radio">
<input type="radio" name="pay" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" checked onchange="toggleQR()"> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î
</div>
<div class="radio">
<input type="radio" name="pay" value="PromptPay" onchange="toggleQR()"> PromptPay
</div>

<div id="qrBox" class="qr" style="display:none">
<img src="https://promptpay.io/66967636910.png" width="220">
<p>‡∏™‡πÅ‡∏Å‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
</div>

<textarea id="note" placeholder="‡πÇ‡∏ô‡πâ‡∏ï‡∏ñ‡∏∂‡∏á‡∏£‡πâ‡∏≤‡∏ô (‡πÑ‡∏°‡πà‡πÄ‡∏ú‡πá‡∏î / ‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏á ‡∏Ø‡∏•‡∏Ø)"></textarea>

<button class="submit" onclick="sendOrder()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
</div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, addDoc, collection, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyXXXX",
  authDomain: "chivats-black-order.firebaseapp.com",
  projectId: "chivats-black-order",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

let cart=[];

window.addItem=(name,price)=>{
  const f=cart.find(i=>i.name===name);
  if(f) f.qty++;
  else cart.push({name,price,qty:1});
  render();
}

function render(){
  const list=document.getElementById("list");
  let total=0;
  list.innerHTML="";
  cart.forEach((i,idx)=>{
    total+=i.price*i.qty;
    list.innerHTML+=`${i.name} x${i.qty}
      <button class="remove" onclick="removeItem(${idx})">X</button><br>`;
  });
  document.getElementById("total").innerText=total;
}

window.removeItem=i=>{
  cart.splice(i,1);
  render();
}

window.toggleQR=()=>{
  const pay=document.querySelector("input[name=pay]:checked").value;
  document.getElementById("qrBox").style.display =
    pay==="PromptPay"?"block":"none";
}

window.sendOrder=async()=>{
  const name=nameInput.value.trim();
  const phone=phoneInput.value.trim();
  const pay=document.querySelector("input[name=pay]:checked").value;
  const note=document.getElementById("note").value;

  if(!name||!phone||cart.length===0){
    alert("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π");
    return;
  }

  await addDoc(collection(db,"orders"),{
    name,phone,payment:pay,note,
    items:cart,
    total:cart.reduce((s,i)=>s+i.price*i.qty,0),
    status:"new",
    time:serverTimestamp()
  });

  alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
  location.reload();
}
</script>
</body>
</html>
