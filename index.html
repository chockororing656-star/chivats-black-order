<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>CHIVATS BLACK ORDER</title>

<style>
body {
  font-family: sans-serif;
  background:#111;
  color:#fff;
  margin:0;
  padding:16px;
}
h1,h2 { margin:8px 0; }
.menu button {
  width:100%;
  margin:6px 0;
  padding:14px;
  border:none;
  border-radius:12px;
  background:#f1c24a;
  font-size:16px;
  font-weight:bold;
}
.card {
  background:#1c1c1c;
  padding:14px;
  border-radius:12px;
  margin-top:14px;
}
input {
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:8px;
  border:none;
  font-size:16px;
}
.radio-group {
  display:flex;
  gap:20px;
  margin-top:10px;
}
button.submit {
  width:100%;
  margin-top:14px;
  padding:16px;
  font-size:18px;
  background:#f1c24a;
  border:none;
  border-radius:14px;
  font-weight:bold;
}
.total {
  margin-top:10px;
  font-size:18px;
}
</style>
</head>

<body>

<h1>üç¢ CHIVATS BLACK</h1>

<h2>‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
<div class="menu">
  <button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L',69)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà L +69</button>
  <button onclick="addItem('‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M',60)">‡πÄ‡∏Ñ‡∏ö‡∏±‡∏ö‡πÑ‡∏Å‡πà M +60</button>
  <button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
  <button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
  <button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L',45)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ L +45</button>
  <button onclick="addItem('‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M',40)">‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ M +40</button>
  <button onclick="addItem('‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ',45)">‡πÄ‡∏ü‡∏£‡∏ô‡∏ü‡∏£‡∏≤‡∏¢ + ‡πÑ‡∏Å‡πà‡∏õ‡πä‡∏≠‡∏õ +45</button>
</div>

<div class="card">
  <h2>üßæ ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</h2>
  <div id="items"></div>
  <div class="total">üí∞ ‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="total">0</span> ‡∏ö‡∏≤‡∏ó</div>
</div>

<div class="card">
  <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡∏±‡πà‡∏á" value="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô">
  <input id="phone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£" value="0000000000">

  <div class="radio-group">
    <label><input type="radio" name="pay" value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î" checked> ‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</label>
    <label><input type="radio" name="pay" value="PromptPay"> PromptPay</label>
  </div>

  <button class="submit" onclick="submitOrder()">‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyXXXX",
  authDomain: "chivats-black-order.firebaseapp.com",
  projectId: "chivats-black-order",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const TELEGRAM_BOT_TOKEN = "8529657624:AAHeinqknXFiKrgyuyOz7h-GCbPUVoHWf3Q";
const TELEGRAM_CHAT_ID  = "566507150";

let cart = [];
let total = 0;

window.addItem = (name, price) => {
  cart.push({ name, price });
  total += price;
  render();
};

function render() {
  document.getElementById("items").innerHTML =
    cart.map(i => `‚Ä¢ ${i.name} (${i.price})`).join("<br>");
  document.getElementById("total").innerText = total;
}

window.submitOrder = async () => {
  if (cart.length === 0) {
    alert("‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π");
    return;
  }

  const order = {
    items: cart,
    total,
    name: document.getElementById("name").value,
    phone: document.getElementById("phone").value,
    payment: document.querySelector('input[name="pay"]:checked').value,
    createdAt: serverTimestamp()
  };

  await addDoc(collection(db, "orders"), order);

  const msg =
`üõé ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà
üë§ ${order.name}
üìû ${order.phone}
üí≥ ${order.payment}

${cart.map(i => "- "+i.name+" "+i.price+"‡∏ø").join("\n")}
üí∞ ‡∏£‡∏ß‡∏° ${total} ‡∏ö‡∏≤‡∏ó`;

  fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      chat_id: TELEGRAM_CHAT_ID,
      text: msg
    })
  });

  alert("‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢");
  cart = [];
  total = 0;
  render();
};
</script>

</body>
</html>
